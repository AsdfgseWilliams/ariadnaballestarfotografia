<form id="contactForm" action="https://formspree.io/f/xeojykgg" method="POST" class="bg-gray-100 p-8 max-w-3xl mx-auto">
    <h2 class="mb-6">FORMULARIO</h2>
    
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <input type="text" name="nombre" placeholder="Nombre" required class="p-3 border" />
        <input type="email" name="email" placeholder="Email" required class="p-3 border" />
        <input type="tel" name="telefono" placeholder="Teléfono" required class="p-3 border" />
        <input type="date" name="fecha_evento" required class="p-3 border" />
        
        <input type="text" name="lugar_evento" placeholder="¿Dónde será?" required class="p-3 border" />
        
        <select name="reserva" required class="p-3 border">
            <option value="">¿Qué quieres reservar?</option>
            <option value="boda">Boda</option>
            <option value="sesion_pareja">Sesión de pareja</option>
            <option value="sesion_individual">Sesión individual</option>
            <option value="sesion_familiar">Sesión en familia</option>
            <option value="otros">Otros</option>
        </select>
  
        <select name="conocido" required class="p-3 border col-span-2">
            <option value="">¿Dónde me has conocido?</option>
            <option value="instagram">Instagram</option>
            <option value="google">Google</option>
            <option value="recomendacion">Recomendación</option>
        </select>
    </div>
    
    <label for="emai" class="sr-only">Real users skip this field</label>
    <input id="emai" type="text" name="emai" class="sr-only" tabindex="-1" />
    
    <textarea name="detalles" rows="4" placeholder="Cuéntame más detalles" class="mt-6 p-3 border w-full"></textarea>
  
    <div class="mt-6">
        <label>
            <input type="checkbox" name="politica_privacidad" required />
            Por favor, revisa la política de privacidad.
        </label>
    </div>
  
    <button type="submit" class="mt-6 bg-gray-500 text-white p-3 hover:bg-gray-700">Enviar</button>
</form>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const form = document.getElementById('contactForm') as HTMLFormElement;

        if (form) {
            form.addEventListener('submit', async (event: Event) => {
                event.preventDefault();
                
                const formData = new FormData(form);

                try {
                    const response = await fetch(form.action, {
                        method: 'POST',
                        body: formData,
                        headers: {
                            'Accept': 'application/json'
                        }
                    });

                    if (response.ok) {
                        window.location.href = '/gracias'; // Redirige a la página de agradecimiento
                    } else {
                        alert('Ha ocurrido un error. Intenta de nuevo.');
                    }
                } catch (error) {
                    alert('Ha ocurrido un error. Intenta de nuevo.');
                }
            });
        }
    });
</script>
